# VisualVM & AsyncProfiler 

### Описание:
* Swagger: http://127.0.0.1:8090/swagger-ui/index.html
* Добавлен метод (POST) http://localhost:8090/api/v1/users которому в теле передаётся login и password
* Логин уникальный, длина логина и пароля ограничена 100 символами.

### Нагрузка 10 rps:
JMeter посылает 10 запросов в секунду.
![10_J0.JPG](res/10_J0.JPG)

### VisualVM:
После прогрева запускаем VisualVM --> Profile -->JDBC. Останавливаем выборку и видим в запросах SELECT (Invocations 2) 
![10_J1.JPG](res/10_J1.JPG)

По хорошему достаточно один раз проверить есть ли у нас такой пользователь в бд перед добавлением (Добавляем фильтр для просмотра одного действия)
![10_J2.JPG](res/10_J2.JPG)

Смотрим код и видим что метод выбора по логину вызывается 2 раза в строках (37 и 47)
![10_J3.JPG](res/10_J3.JPG)

Комментируем лишний вызов
![10_J4.JPG](res/10_J4.JPG)

Ещё раз профилируем и видим что теперь вызовы выполняются один раз
![10_J5.JPG](res/10_J5.JPG)

### AsyncProfiler:
Запускаем (подаём нагрузку) записываем. 
![10_J6.JPG](res/10_J6.JPG)

В контроллере вызов сервиса забрал 95%
![10_J8.JPG](res/10_J8.JPG)

Заходим в сервис и смотрим как эти проценты распределены:
![10_J7.JPG](res/10_J7.JPG)

В контроллёре вывод в лог если навести на процент то можно увидеть подробности
![10_J9.JPG](res/10_J9.JPG)