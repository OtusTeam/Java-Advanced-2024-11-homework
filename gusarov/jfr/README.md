# JFR 

### Описание:
* Swagger: http://127.0.0.1:8089/swagger-ui/index.html
* Добавлен метод (POST) http://localhost:8089/api/v1/users которому в теле передаётся login и password
* Логин уникальный, длина логина и пароля ограничена 100 символами.

### Нагрузка 10 rps:
JMeter посылает 10 запросов в секунду.
![J0.JPG](res/J0.JPG)

### JMC:
После прогрева и запуска JFR на минуту видно 600 NoResultException (в query по <criteria>).  
![J2.JPG](res/J2.JPG)

После изучения места падения видно, что при запросе к БД для поиска (По логину происходит внутри NoResultException)
![J1.JPG](res/J1.JPG)

Запуск JFR при работающем приложении

![J3.JPG](res/J3.JPG) 

Полного описания ошибок нет ( по умолчанию)
![J4.JPG](res/J4.JPG)

Если в код добавить и отловить исключение (метод addToMap)

![J6.JPG](res/J6.JPG)

То после анализа видно что добавилось ещё 600 исключений (Всего стало порядка 1270) 
![J7.JPG](res/J7.JPG)

Если добавить в код лишний вызов поиска по логину (строка 45)
![J8.JPG](res/J8.JPG)

то исключений NoResultException становиться 1200 что ( наводит на мысль двойного вызова)
![J9.JPG](res/J9.JPG)

Также можно ослеживать сколько раз читался файл из ресурсов ( валидация по схеме). И откуда он был вызван
![J10.JPG](res/J10.JPG)

Писимистичная блокировка была реализована так (стр 72) (но видимо задержки не велики и особенно это не возможно отследить при нагрузке в 10 rps)
![J11.JPG](res/J11.JPG)
